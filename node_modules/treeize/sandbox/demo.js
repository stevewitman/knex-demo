var util            = require('util');
var Treeize         = require('../lib/treeize');

var welldata1       = require('../test/data/welldata1');
var welldata2       = require('../test/data/welldata2');
var arraywelldata   = require('../test/data/arraywelldata');
var classdata   = require('../test/data/classdata');
// var CSV             = require('a-csv');
var _               = require('lodash');

var fields = new Treeize();
// fields
//       .setOptions({ input: { uniformRows: false } })
//       .grow(welldata1)
//       .grow(welldata2)
//       .grow(arraywelldata)
//     ;

    fields
      .setOptions({ input: { uniformRows: false } })
      .grow(welldata1)
      .grow(welldata2)
      .grow(arraywelldata)
    ;

// test node dependency

var testData = [
  {
    'name': 'John Doe',
    'age': 34,
    'pets:name': 'Rex',
    'pets:type': 'dog',
    'pets:toys:type': 'bone'
  },
  {
    'name': 'John Doe',
    'age': 34,
    'pets:name': 'Rex',
    'pets:type': 'dog',
    'pets:toys:type': 'ball'
  },
  {
    'name': 'Mary Jane',
    'age': 19,
    'pets:name': 'Mittens',
    'pets:type': 'cat',
    'pets:toys:type': 'yarn'
  },
  {
    'name': 'Mary Jane',
    'age': 19,
    'pets:name': 'Fluffy',
    'pets:type': 'cat',
  }
];

testData = [
  ['name', 'age', 'pets:name', 'pets:type', 'pets:toys:type'],
  ['John Doe', 34, 'Rex', 'dog', 'bone'],
  ['John Doe', 34, 'Rex', 'dog', 'ball'],
  ['Mary Jane', 19, 'Mittens', 'cat', 'yarn'],
  ['Mary Jane', 19, 'Fluffy', 'cat', null]
];

// var test4 = new Treeize();
// test4
//   .setOptions({ log: true, input: { uniformRows: false } })
//   .grow(testNodeDependency)
// ;

// var keywords = new Treeize();
// keywords.grow(keywordsTest);

// console.log('BASE>', test4 + '');
// console.log('STATS>', util.inspect(test4.stats, false, null), "\n\n");

// parseXlsx('injection.xlsx', function(err, data) {
//     console.log('err', err);
//     if(err) throw err;
//     console.log('data read successfully');
//     // data is an array of arrays
// });


var data = [];

var options = {
  delimiter: "|",
  charset: "win1250"
};

// CSV.parse(__dirname + '/test/data/mooc2.csv', options, function (err, row, next) {
//   if (err) {
//     return console.log(err);
//   }

//   if (row) {
//     data.push(row);
//     return next();
//   }

//   if (!row) {
//     var universities = new Treeize();
//     universities
//       // .setOptions({ log: true })
//       .grow(data)
//     ;

//     console.log('BASE>', universities + '');
//     console.log('STATS>', util.inspect(universities.stats, false, null), "\n\n");
//   }
// });


var tree = new Treeize();

tree.grow(testData);

// var tree = new Treeize();

// tree.setOptions({ log: true }).grow([
//   { 'foo': 'bar', 'logs:id': 'abc', 'logs:a:b': 1 },
//   { 'foo': 'bar', 'logs:id': 'abc', 'logs:a:b': 2 },
//   { 'foo': 'baz', 'logs:id': 'abc', 'logs:a:b': 3 },
// ]);

// tree.setOptions({ log: true }).grow([
//   { 'foo': 'bar', 'logs-:a:b:c': 1 },
//   { 'foo': 'bar', 'logs-:a:b:c': 2 },
//   { 'foo': 'baz', 'logs-:a:b:c': 3 },
// ]);

// tree.setOptions({ log: true }).grow([
//   { 'foo': 'bar', 'logs:a': 1 },
//   { 'foo': 'bar', 'logs:a': 2 },
//   { 'foo': 'baz', 'logs:a': 3 },
// ]);

console.log('BASE>', tree + '');
console.log('STATS>', util.inspect(tree.stats, false, null), "\n\n");

// console.log('KEYWORDS>', keywords + '');
// console.log('STATS>', util.inspect(keywords.stats, false, null));
